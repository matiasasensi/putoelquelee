<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>AR Test</title>

    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>
  

  <body style="margin:0; overflow:hidden;">
    <div style="position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 10;">
  <button id="countBtn" style="font-size: 20px; padding: 10px 20px;">Click me!</button>
  <p>Score: <span id="score">0</span>/10</p>
</div>
    <a-scene embedded arjs>
      <a-entity light="type: directional; color: #FFF; intensity: 1" position="0 1 0"></a-entity>
      <a-entity light="type: ambient; color: #FFF; intensity: 0.8"></a-entity>
      <a-entity light="type: directional; color: #FFF; intensity: 0.3" position="-2 1 0"></a-entity>


     <a-marker preset="hiro" emitevents="true" id="marker">

  <a-entity
    id="fakemogus"
    gltf-model="url(materiales/fakemogus.glb)"
    scale="0.5 0.5 0.5"
    position="0 0 0"
    rotation="180 180 180"
    animation-mixer="autoplay: false">
  </a-entity>

</a-marker>


      <a-entity camera></a-entity>
    </a-scene>
   <script>
  const marker = document.querySelector("#marker");

  marker.addEventListener("markerFound", () => {
    alert("MARKER DETECTADO");
  });

  marker.addEventListener("markerLost", () => {
    console.log("marker lost");
  });
</script>
<script>
let score = 0;
const btn = document.getElementById("countBtn");
const scoreDisplay = document.getElementById("score");
const model = document.getElementById("fakemogus");

btn.addEventListener("click", () => {
  score++;
  scoreDisplay.innerText = score;

  // Esperar que el modelo esté cargado
  if (model.components["animation-mixer"]) {
    const mixer = model.components["animation-mixer"];
    // Reinicia animación
    mixer.stop();  
    mixer.play();  
  } else {
    console.warn("Modelo aún no cargado o sin animaciones");
  }
});
</script>



  </body>
</html>
