<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>AR Test</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>

  <body style="margin:0; overflow:hidden;">

    <!-- Botón y score -->
    <div style="position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 10; text-align:center;">
      <button id="countBtn" style="font-size: 20px; padding: 10px 20px;">Click me!</button>
      <p>Score: <span id="score">0</span></p>
    </div>

    <a-scene embedded arjs>

      <!-- Iluminación -->
      <a-entity light="type: ambient; color: #FFF; intensity: 0.8"></a-entity>
      <a-entity light="type: directional; color: #FFF; intensity: 0.5" position="0 2 2"></a-entity>
      <a-entity light="type: directional; color: #FFF; intensity: 0.3" position="-2 1 0"></a-entity>

      <!-- Marker -->
      <a-marker preset="hiro" emitevents="true" id="marker">

        <!-- Modelo GLB -->
       <a-entity
  id="fakemogus"
  gltf-model="url(materiales/fakemogus.glb)"
  scale="0.5 0.5 0.5"
  position="0 0 0"
  rotation="0 180 0"
  animation-mixer="clip: take.001; autoplay: false"
  event-set__modelloaded="model-loaded: console.log('Modelo cargado')">
</a-entity>


      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <!-- Scripts -->
    <script>
const btn = document.getElementById("countBtn");
const scoreDisplay = document.getElementById("score");
let score = 0;
const model = document.getElementById("fakemogus");

// Esperar a que el modelo cargue
model.addEventListener("model-loaded", () => {
  console.log("Modelo listo para animar");

  btn.addEventListener("click", () => {
    score++;
    scoreDisplay.innerText = score;

    const mixer = model.components["animation-mixer"];
    if (mixer) {
      // Reiniciar animación
      mixer.stop();
      mixer.play();
    } else {
      console.warn("Animation mixer no listo");
    }
  });
});
</script>


  </body>
</html>
